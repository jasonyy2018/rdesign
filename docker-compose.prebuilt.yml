services:
  ai-zhishengji:
    container_name: ai-zhishengji-web
    build:
      context: .
      dockerfile: Dockerfile.prebuilt
    restart: always
    ports:
      - '8084:8080'
    environment:
      - BACKEND_URL=http://119.91.202.144:3399
      - ARTICLES_URL=http://119.91.202.144:3210
      - PORT=8080

    ## 快速部署流程:
    ## 1. 本地执行: pnpm run build:spa
    ## 2. 上传 dist/, server.js, package.json, pnpm-lock.yaml, Dockerfile.prebuilt, docker-compose.prebuilt.yml
    ## 3. 服务器执行: docker-compose -f docker-compose.prebuilt.yml down && docker-compose -f docker-compose.prebuilt.yml up --build -d
